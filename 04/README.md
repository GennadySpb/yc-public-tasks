# Анализ данных в DataLens

## DataLens
**DataLens** — Cервис визуализации и анализа данных, позволяющий создавать аналитические дашборды с диаграммами, таблицами и другими вариантами визуализации над различными источниками.
В DataLens есть четыре основных объекта:
* Подключение — параметры доступа к источнику данных&
* Датасет — набор данных из источника и их метаописание.
* Виджет — визуализация данных в виде графиков и таблиц.
* Дашборд — страница с набором виджетов и управляторов.
* * * * *  

## Задача
Необходио проанализировать срездний доход футболитов.
* Определить самую массовую национальность футбольстов
* Определить период, когда рождались футболисты с самими высоки зарплатами на текущий период
* * * * *  

### Этап загрузки данных и создания датасета
Одим из источников данных для **DataLens** являются CSV-файл. В случае работы с CSV-файлом он предварительно предзагружается в хранилище DataLens для дальнейшего исполнения запросов.


1. Перейдите на главную страницу **Datalens** https://datalens.yandex.ru
1. В правом меню нажимаем на ***Подключения***. Отображется список доступных вам подключений.
3. Нажимаем ***Создать датасет***
1. В диалоговом окне отображается список доступных подключений, на основе которых можно создать датасет. Мы хотим создать новое подлючение на основе файла [Footbal.csv](https://yadi.sk/i/Rdza_3ZtWNcQJw)
1. Нажимаем ***Создать подключение*** в правом верхнем углу.
1. Выбираем ***CSV***
1. Нажимаем ***Выбрать CSV-файл***.
1. Указываем файл [Footbal.csv](https://yadi.sk/i/Rdza_3ZtWNcQJw). До загрузки файла может понадобится некоторое время (5-10 секунд).
1. Нажимаем ***Сохранить***

### Настройка датасета
Датаест описывает набор данных из источника, определяет принадоежность полей к измерениям и показателям, типы агрегаций для показателей, вычисляемые поля.

1. Дублируем поле *ID*: нажимаем на троеточие в равой части строки с полем, далее пункт меню ***Продублировать***
1. Переименовываем *ID* в *footballer ID*
1. Переименовываем *ID (1)* в *Count*
1. Для поля *Count* меняем тип агрегации на ***CountUniq***, поле меняет цвет на синий становясь показателем
1. Дублируем поле *eur_salary*
1. Переименовываем *eur_salary* в *eur_salary sum*
1. Переименовываем *eur_salary (1)* в *eur_salary avg*
1. Для поля *eur_salary sum* меняем тип агрегации на ***Sum***
1. Для поля *eur_salary avg* меняем тип агрегации на ***Avg***
1. Сохраняем датасет, нажимаем ***Сохранить***
1. Нажимаем ***Создать чарт***

### Настройка датасета
Визуализация данных настраиватеся в **Визарде**. Интерфейс Визарда делится на три области:
* Справа — область выбора с измерениями и показателями датасета.
* Посередине — область настройки визуализации.
* Слева — область превью.

#### Определить самую массовую национальность футбольстов
1. Выбираем ***столбчатую диаграмму*** в области настройки визуализаций
1. Выносим *nationality* на ось X, *Count* на Ось Y
1. Выносим *Count* в сортировку, меняем порядо сортировки по убыванию
1. Выделяем часть графика с максимальными значениями столбцов, смотрим какие страны в лидерах

#### Определить период, когда рождались футболисты с самими высоки зарплатами на текущий период
1. Удаляем текущие 
1. Меняем на сортировку по убыванию
1. Выносим Weight sum в Фильтр
1. Указываем Больше 0
1. Выносим Gender в секцию Цвет
1. Сохраняем
1. Нажимаем Копировать виджет
1. Выносим Gender в секции Цвет на Alignment
Сохраняем
Переходим на главную страницу
Нажимаем Создать дашборд
Переходим в режим редактирования
Нажимаем добавить виджет, добавляем первый чарт с диаграммой
Нажимаем добавить виджет, добавляем второй чарт с таблицей
Растягиваем чарты на дашборде
Добавляем селекторы по полям Race и Publisher
Сохраняем
Применяем фильтры
Видим, что в основном плохие ребята выше ростом хороши, и еще, что мужчины выше женщины.
